#! /bin/bash

# Usage:
#
# bin/author_commits_for_repository HANDLE REPOSITORY AUTHORNAME

handle="$1"
repo="$2"
author="$3"

mkdir tmp 2&>/dev/null
repo_destination="./tmp/$repo"
rm -rf "$repo_destination"
git clone --bare "git@github.com:$handle/$repo.git" "$repo_destination"

cd "$repo_destination" || echo "bad repo: $repo_destination"
git --no-pager log --author="\(mace2345@gmail.com\)\|\($author\)" --pretty="" --numstat --no-merges | node ~/code/clt/gitrospection/stream.js
